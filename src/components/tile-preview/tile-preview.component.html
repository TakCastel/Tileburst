@if (tile(); as currentTile) {
  <div class="flex items-center justify-center max-w-[60px] max-h-[60px] lg:max-w-[120px] lg:max-h-[120px]">
    <div class="grid gap-0.5" [style]="gridStyles()">
      @for (row of currentTile.shape; track $index) {
        @for (cell of row; track $index) {
          <div [style.width.px]="cellSize()" [style.height.px]="cellSize()" class="flex items-center justify-center">
            @if (cell === 1) {
              <div 
                class="w-full h-full rounded-md transition-all tile-preview-piece relative overflow-hidden" 
                [class]="backgroundColorClass()"
                [style]="shadowStyle()">
                @if (getShapeForColor(currentTile.color); as shape) {
                  <div class="absolute inset-0 flex items-center justify-center pointer-events-none"
                       [class]="getShapeColorClass(currentTile.color)">
                    @switch (shape) {
                      @case ('square') {
                        <div class="w-3/4 h-3/4 rounded-sm"></div>
                      }
                      @case ('circle') {
                        <div class="w-3/4 h-3/4 rounded-full"></div>
                      }
                      @case ('triangle') {
                        <div class="w-3/4 h-3/4" style="clip-path: polygon(50% 0%, 0% 100%, 100% 100%);"></div>
                      }
                      @case ('cross') {
                        <div class="relative w-3/4 h-3/4">
                          <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-1/3"></div>
                          <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-full w-1/3"></div>
                        </div>
                      }
                      @case ('star') {
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-3/4 h-3/4">
                          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                      }
                    }
                  </div>
                }
              </div>
            }
          </div>
        }
      }
    </div>
  </div>
}